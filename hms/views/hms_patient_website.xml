<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <!-- Patient Registration Form -->
  <template id="hms_patient_register_template" name="HMS Patient Registration">
    <t t-call="web.frontend_layout">
      <t t-set="no_header" t-value="True"/>
      <t t-set="no_footer" t-value="True"/>

      <div class="o_login_outer d-flex align-items-center justify-content-center">
        <div class="o_login_overlay"></div>

        <div class="o_login_inner card shadow-lg p-4">
          <!-- Logo + Title -->
          <div class="text-center pb-3 border-bottom mb-4">
            <img t-att-src="'/hms/static/src/img/logo.png'" alt="Logo"/>
            <h4 class="mt-3">Patient Registration</h4>
          </div>

          <form method="post" action="/hms/patient/register">
            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

            <!-- Full Name -->
            <div class="mb-3">
              <label class="form-label">Full Name</label>
              <input class="form-control" type="text" name="name"
                     t-att-value="post.get('name') if post else ''" required="required"/>
              <t t-if="errors and errors.get('name')">
                <small class="text-danger"><t t-esc="errors.get('name')"/></small>
              </t>
            </div>

            <!-- Email -->
            <div class="mb-3">
              <label class="form-label">Email</label>
              <input class="form-control" type="email" name="email"
                     t-att-value="post.get('email') if post else ''"/>
              <t t-if="errors and errors.get('email')">
                <small class="text-danger"><t t-esc="errors.get('email')"/></small>
              </t>
            </div>

            <!-- Phone -->
            <div class="mb-3">
              <label class="form-label">Phone</label>
              <input class="form-control" type="text" name="phone"
                     t-att-value="post.get('phone') if post else ''"/>
            </div>

            <!-- Street -->
            <div class="mb-3">
              <label class="form-label">Street</label>
              <input class="form-control" type="text" name="street"
                     t-att-value="post.get('street') if post else ''"/>
            </div>

            <!-- City -->
            <div class="mb-3">
              <label class="form-label">City</label>
              <input class="form-control" type="text" name="city"
                     t-att-value="post.get('city') if post else ''"/>
            </div>

            <!-- Country -->
            <div class="mb-3">
              <label class="form-label">Country</label>
              <select class="form-select" name="country_id">
                <option value="">-- Select --</option>
                <t t-foreach="countries" t-as="c">
                  <option t-att-value="c.id"
                          t-att-selected="(post.get('country_id') == str(c.id)) if post else False">
                    <t t-esc="c.name"/>
                  </option>
                </t>
              </select>
            </div>

            <!-- Buttons -->
            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-primary w-100">Register</button>
              <a href="/web/login" class="btn btn-link w-100">Back to login</a>
            </div>
          </form>
        </div>
      </div>
    </t>
  </template>

  <!-- Registration Success -->
<template id="hms_patient_register_success" name="HMS Patient Registration Success">
  <t t-call="web.frontend_layout">
    <t t-set="no_header" t-value="True"/>
    <t t-set="no_footer" t-value="True"/>

    <div class="o_login_outer d-flex align-items-center justify-content-center">
      <div class="o_login_overlay"></div>

      <div class="o_login_inner card shadow-lg p-4 text-center">
        <h4 class="fw-bold mb-3">Registration Complete</h4>
        <p class="mb-3">
          Thank you, <t t-esc="partner.name"/>. Your patient profile has been created.
        </p>
        <p class="text-muted small mb-4">
          Weâ€™ve sent you an activation email. Please check your inbox and follow the link to set your password and access your portal.
        </p>
        <a href="/web/login" class="btn btn-primary w-100">Go to login</a>
      </div>
    </div>
  </t>
</template>
</odoo>
